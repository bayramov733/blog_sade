{% extends 'base.html' %}
{% load markdown_extras %}
{% block content %}

<body class="bg-gray-100 font-sans leading-normal tracking-normal"> 

	<!-- <nav id="header" class="fixed w-full z-10 top-0">

		<div id="progress" class="h-1 z-20 top-0" style="background:linear-gradient(to right, #4dc0b5 var(--scroll), transparent 0);"></div>

		<div class="w-full md:max-w-4xl mx-auto flex flex-wrap items-center justify-between mt-0 py-3">

			<div class="pl-4">
				<a class="text-gray-900 text-base no-underline hover:no-underline font-extrabold text-xl" href="#">
					Minimal Blog
				</a>
			</div>

			<div class="block lg:hidden pr-4">
				<button id="nav-toggle" class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-900 hover:border-green-500 appearance-none focus:outline-none">
					<svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
						<title>Menu</title>
						<path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" />
					</svg>
				</button>
			</div>

			<div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-gray-100 md:bg-transparent z-20" id="nav-content">
				<ul class="list-reset lg:flex justify-end flex-1 items-center">
					<li class="mr-3">
						<a class="inline-block py-2 px-4 text-gray-900 font-bold no-underline" href="#">Active</a>
					</li>
					<li class="mr-3">
						<a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4" href="#">link</a>
					</li>
					<li class="mr-3">
						<a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:text-underline py-2 px-4" href="#">link</a>
					</li>
				</ul>
			</div>
		</div>
	</nav> -->

	<!--Container-->
	<div class="container w-full md:max-w-3xl mx-auto pt-20">

		<div class="w-full px-4 md:px-6 text-xl text-gray-800 leading-normal" style="font-family:Georgia,serif;">

			<!--Title-->
			<div class="font-sans">
						<h1 class="font-bold font-sans break-normal text-gray-900 pt-6 pb-2 text-3xl md:text-4xl">
						{{ post.title }}</h1>
						<p class="text-sm md:text-base font-normal text-gray-600">
						{{ obj.timestamp}}</p>
						<img class="h-50 rounded w-full object-cover object-center mb-6" src="{{ post.thumbnail.url }}" alt="content">
			</div>


			<!--  LIKE BURDA -->
			{% if user.is_authenticated %}
			<form method="POST" action="{% url 'like_post' post.slug %}" class="mb-6">
				{% csrf_token %}
				{% if user in post.likes.all %}
        			<button type="submit" class="text-gray-900">
            		‚ù§Ô∏è {{ post.total_likes }}
       				</button>
    			{% else %}
        			<button type="submit" class="flex items-center space-x-1 px-2 py-1"> 
            		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="24" height="24">
  					<path d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5
  					-1.935 0-3.597 1.126-4.312 2.733
  					-.715-1.607-2.377-2.733-4.313-2.733
  					C5.1 3.75 3 5.765 3 8.25
  					c0 7.22 9 12 9 12s9-4.78 9-12z"/>
					</svg>
					<span class="text-gray-900">{{ post.total_likes }}</span> 
        			</button>
    			{% endif %}
			</form>
			
			{% else %}
			<p class="text-sm text-gray-500 mb-6">
				Like etm…ôk √º√ß√ºn login olun
			</p>
			{% endif %}
			<!--  LIKE QUTARDI -->

			<div class="flex items-center text-gray-700 text-xl font-semibold">
    		üëÅ <span class="ml-2">{{ post.views }}</span>
  			</div>


			<!--Post Content-->

			<div class="py-6">
			{{ post.content | markdown | safe }}
			</div>


		

		

			<ol>
				<li class="py-3">BMW M5 ‚Äî avtomobil ≈üirk…ôti BMW t…ôr…ôfind…ôn hazƒ±rlanmƒ±≈ü...</li>
			</ol>

	


			<!--/ Post Content-->

		</div>

		

		<!--Divider-->
		<hr class="border-b-2 border-blue-900 mb-8 mx-4">

		






		<!--Author-->
		<div class="flex w-full items-center font-sans px-4 py-12">
			<img class="w-10 h-10 rounded-full mr-4" src="{{ post.author.profile_picture.url }}">
			<div class="flex-1 px-2">
				<p class="text-base font-bold text-base md:text-xl leading-none mb-2">
				{{ post.author }}</p>
		
			</div>
			
		</div>
		<!--/Author-->

		<!--Divider-->
		<hr class="border-b-2 border-blue-900 mb-8 mx-4">

		    <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
    			üí¨ Comments
			</h3>

			{% for comment in comments %}
    			<div class="bg-gray-100 p-4 rounded-xl mb-3 shadow-sm">
        			<strong class="text-gray-800">
            			{{ comment.user.username }}
        			</strong>

        			<p class="text-gray-700 mt-1">
            			{{ comment.content }}
        			</p>

        			<small class="text-gray-500 block mt-2">
            			{{ comment.created_at }}
        			</small>
    			</div>
			{% empty %}
    			<p class="text-gray-500">H…ôl…ô comment yoxdur.</p>
			{% endfor %}

			{% if user.is_authenticated %}
			<form method="POST" class="mt-6">
   				{% csrf_token %}

    			<textarea name="content" required placeholder="≈û…ôrh …ôlav…ô edin..." class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 resize-none"
       			></textarea>

    			<button type="submit" class="mt-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-xl transition"
            	>G√∂nd…ôr 
    			</button>
			</form>
			{% else %}
				<p class="text-red-500 mt-4">
    			Comment yazmaq √º√ß√ºn login olun.
				</p>
			{% endif %}






	</div>
	<!--/container-->

	

	<script>
		/* Progress bar */
		//Source: https://alligator.io/js/progress-bar-javascript-css-variables/
		var h = document.documentElement,
			b = document.body,
			st = 'scrollTop',
			sh = 'scrollHeight',
			progress = document.querySelector('#progress'),
			scroll;
		var scrollpos = window.scrollY;
		var header = document.getElementById("header");
		var navcontent = document.getElementById("nav-content");

		document.addEventListener('scroll', function() {

			/*Refresh scroll % width*/
			scroll = (h[st] || b[st]) / ((h[sh] || b[sh]) - h.clientHeight) * 100;
			progress.style.setProperty('--scroll', scroll + '%');

			/*Apply classes for slide in bar*/
			scrollpos = window.scrollY;

			if (scrollpos > 10) {
				header.classList.add("bg-white");
				header.classList.add("shadow");
				navcontent.classList.remove("bg-gray-100");
				navcontent.classList.add("bg-white");
			} else {
				header.classList.remove("bg-white");
				header.classList.remove("shadow");
				navcontent.classList.remove("bg-white");
				navcontent.classList.add("bg-gray-100");

			}

		});


		//Javascript to toggle the menu
		document.getElementById('nav-toggle').onclick = function() {
			document.getElementById("nav-content").classList.toggle("hidden");
		}
	</script>
	

<!-- </body> -->

{% endblock content %}
